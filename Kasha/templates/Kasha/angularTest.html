{% extends 'Kasha/base.html' %}
{% load staticfiles %}
{% load bootstrap3 %}
{% bootstrap_css %}
{% bootstrap_javascript %}
{% block content %}
{% load kasha_extras %}
{% load crispy_forms_tags %}

{% block header %}
<link href="{% static 'index.css' %}" rel="stylesheet">
{% endblock header %}

<div class="container-fluid">
<br / >
<br / >
<br / >
{% verbatim %}

<div ng-app="sefariaSearchApp" ng-controller="sefariaSearchApiCtrl"> 

    <select ng-model="selectedChumash" ng-change="showSelectValue(selectedChumash)">
       <option value="">Choose</option>
      <option ng-repeat="x in chumash" value="{{x.book}}">{{x.book}}</option>
    </select>

    Chapter: <select ng-model="selectedChapter"  id="select-chapter" name="chapter">
    </select>
    <button ng-click="searchSefariaApi()">Search</button>

    <h1> {{ selectedChumash }} {{ selectedChapter }} </h1>

    <h1>{{sefer}}</h1>
    <h1>{{chapter}}</h1>


<table id="table" class="table table-striped table-bordered">
    <tbody ng-repeat="verse in pasukim" >
        <tr>
          <td class="eng-text" ng-bind-html="verse.en | unsafe"></td>
          <td dir="rtl" class="heb-text" ng-bind-html="verse.he | unsafe"></td>
        </tr>
        <tr class="rashi-item" ng-repeat="r in verse.rashi">
          <td class="eng-text eng-rashi" ng-bind-html="r.en | unsafe"></td>
          <td dir="rtl" class="heb-text heb-rashi" ng-bind-html="r.he | unsafe"></td>
        </tr>
      </tbody>
</table>
</div>
{% endverbatim %}
</div> <!-- /.container -->
{% endblock content %}


{% block script %}

<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>
<script type="text/javascript" src="{% static 'js/sefariaSearchApi.js' %}"></script>
<script>
app.filter('unsafe', function($sce) { return $sce.trustAsHtml; });
</script>
{% endblock %}