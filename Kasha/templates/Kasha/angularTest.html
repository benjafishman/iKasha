{% extends 'Kasha/base.html' %}
{% load staticfiles %}
{% load bootstrap3 %}
{% bootstrap_css %}
{% bootstrap_javascript %}
{% block content %}
{% load kasha_extras %}

{% load crispy_forms_tags %}


{% block header %}
<link href="{% static 'index.css' %}" rel="stylesheet">

    {% endblock header %}

<div class="container-fluid">
<br / >
<br / >
<br / >
{% verbatim %}
<div ng-app="myApp" ng-controller="myCtrl">
    Name: <input ng-model="firstname">

    <h1>{{firstname}}</h1>
    <h1>{{lastname}}</h1>

    <p>The ID is {{greeting.id}}</p>
      <p>The content is {{greeting.content}}</p>
</div>
{% endverbatim %}


    </div> <!-- /.container -->
{% endblock content %}


{% block script %}
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>
<script>
var app = angular.module('myApp', []);
app.controller('myCtrl', function($scope) {
    $scope.firstname = "John";
    //$scope.lastname = "Doe";



$.ajax({
    url: "http://www.sefaria.org/api/texts/Genesis.1",
 
    // The name of the callback parameter, as specified by the YQL service
    jsonp: "callback",
 
    // Tell jQuery we're expecting JSONP
    dataType: "jsonp",
 
    // Work with the response
    success: function( response) {

        console.log( response ); // server response  
          
        var str = JSON.stringify(response['he'], null, 2); // spacing level = 

        var hebrew_text = JSON.stringify(response['he'], null, 2); 

        var english_text = JSON.stringify(response['text'], null, 2); 

        console.log( hebrew_text ); // server response

        console.log( english_text ); // server response

        //var commentary = JSON.stringify(response['commentary'], null, 2); 

        //console.log( commentary ); // server response
        $scope.$apply(function () {
        $scope.lastname = hebrew_text;
      });
/*
        $.grep( response, function( n, i ) {
          //console.log(n.commentary.commentator==='Rashi');
    });*/
    }
});
});

</script>
{% endblock %}